function checkNasty(){"#dirty"==window.location.hash?(gameWonArray=gameWonArrayDirty,gameLostArray=gameLostArrayDirty,void 0!==messageIndex&&void 0!==gameOutcomeMessages&&void 0!==gameOutcome&&("lost"==gameOutcome?(gameOutcomeMessages=gameLostArray,gameShare=gameShareDirty.lost,$(".tweet").attr("href",gameShare.tw)):"won"==gameOutcome&&(gameOutcomeMessages=gameWonArray,gameShare=gameShareDirty.won,$(".tweet").attr("href",gameShare.tw)),message=gameOutcomeMessages[messageIndex],$("#finished h1").text(message)),$("#instructions h1").text("Lil Shit"),$("#instructions li figure figcaption").each(function(){$(this).text($(this).text().replace("pretty","fucking").replace("funk","fuck").replace("poopy","shit").replace("weewee","piss").replace("meanies","assholes")),$("#switchNasty").attr("href","#clean"),$("#switchNasty span.nasty-reverse").text("Clean")})):(gameWonArray=gameWonArrayClean,gameLostArray=gameLostArrayClean,void 0!==messageIndex&&void 0!==gameOutcomeMessages&&void 0!==gameOutcome&&("lost"==gameOutcome?(gameOutcomeMessages=gameLostArray,gameShare=gameShareClean.lost,$(".tweet").attr("href",gameShare.tw)):"won"==gameOutcome&&(gameOutcomeMessages=gameWonArray,gameShare=gameShareClean.won,$(".tweet").attr("href",gameShare.tw)),message=gameOutcomeMessages[messageIndex],$("#finished h1").text(message)),$("#instructions h1").text("Lil Poop"),$("#instructions li figure figcaption").each(function(){$(this).text($(this).text().replace("fucking","pretty").replace("fuck","funk").replace("shit","poopy").replace("piss","weewee").replace("assholes","meanies")),$("#switchNasty").attr("href","#dirty"),$("#switchNasty span.nasty-reverse").text("Dirty")}))}function randNum(e,t){return Math.round(Math.random()*(t-e))+e}function recthit(e,t){var a=$(e),s=$(t),o=a.offset().left,i=a.width(),n=a.offset().top,r=a.height(),h=s.offset().left,u=s.width(),m=s.offset().top,c=s.height();return!(n+r<m||n>m+c||o>h+u||o+i<h)}function circlehit(e,t){var a=$(e),s=$(t);a.r=a.width()/2,a.x=a.position().left+a.r,a.y=a.position().top+a.r,s.r=s.width()/2,s.x=s.position().left+s.r,s.y=s.position().top+s.r;var o=a.x-s.x,i=a.y-s.y;return o*o+i*i<=(a.r+s.r)*(a.r+s.r)}function enemySpeed(){return timer<50?1e3:timer<100?1500:timer<150?2e3:timer>=150?2500:void 0}function squirt(){$(".canSquirt").each(function(){var e=$("<div>").addClass("water enemy"),t=($(".water"),$(this).position().top),a=$(this).position().left-100,s=enemySpeed();e.css({top:t,left:a,width:5}),bathroom.append(e),e.animate({left:-100},{duration:2*s/10,easing:"linear",queue:!1,complete:function(){$(this).remove()}}).animate({width:100},{duration:s/100,easing:"linear",queue:!1}),playSoundLang(spraySquirt)})}function enemyTurnUp(){enemyThreshold=timer<50?1500:timer<100?2e3:timer<250?2500:3e3}function createEnemy(){if(shitIsRun){var e,t=$("<div>").addClass("enemy"),a=shit.position().top;1==(e=timer<150?randNum(1,5):timer<160?randNum(1,4):timer<170?randNum(1,3):timer<180?randNum(1,2):1)?t.addClass("yellowSpray canSquirt"):2==e?t.addClass("plunger"):3==e?t.addClass("soap"):4==e?t.addClass("brush"):5==e&&t.addClass("redSpray canSquirt");var s,o=bathroom.width()+300,i=enemySpeed();t.hasClass("yellowSpray")&&(s=450),t.hasClass("plunger")&&(s=a,i-=300),t.hasClass("soap")&&(s=randNum(350,450),i+=1e3),t.hasClass("brush")&&(s=a,i=i/10+750),t.hasClass("redSpray")&&(s=randNum(300,375),i-=200),t.css({top:s,left:o}),bathroom.append(t),t.animate({left:-300},i,"linear",function(){$(this).remove()}),enemyTurnUp(),setTimeout(squirt,i/3)}createEnemyInt=setTimeout(createEnemy,enemyThreshold)}function createLife(){if(shitIsRun){var e,t=randNum(1,5),a=$("<div>").addClass("fart"),s=bathroom.width()+a.outerWidth();e=t>=3?"brown":"green",a.css({top:150,left:s}),a.addClass(e),bathroom.append(a),a.animate({left:-100},5e3,"linear",function(){$(this).remove()})}createLifeInt=setTimeout(createLife,randNum(1e4,2e4))}function createPiss(){if(shitIsRun){var e=$("<div>").addClass("piss"),t=bathroom.width()+e.outerWidth();e.css({top:525,left:t}),bathroom.append(e),e.animate({left:-200},3e3,"linear",function(){$(this).remove()})}pissInt=setTimeout(createPiss,randNum(15e3,2e4))}function runTimer(){shitIsRun&&(timer--,$("#timer h2").text(timer),timer<=50&&$("#timer h2").css({color:"#800"}),timer<=0&&(timer=0,gameOutcome="lost",finished()))}function addScore(){shitIsRun&&((score+=5)<0&&(score=0),$("#score span").text(score))}function updateStankBar(){var e=stank/10*100;$("#stankBar #bar").animate({width:e+"%"},400),stank<=0&&(stank=0,gameOutcome="lost",finished())}function bgMove(){shitIsRun&&(bgX-=bgXSpeed,bathroom.css({"background-position":bgX+"px 0px"}))}function ouchie(){playSound(ow),shit.addClass("itHurt"),setTimeout(function(){shit.removeClass("itHurt")},1e3)}function thisToilet(){toilet.animate({top:200},500).animate({top:300},500,thisToilet)}function playSoundLang(e){gameRunning&&(e.play(),e.muted=!1),gameRunning||(e.muted=!0)}function playSound(e){e.cloneNode().play()}function gameOn(){var e=0,t=0,a=shit.position().top,s=shit.position().left,o=shit.outerHeight(),i=shit.outerWidth(),n=bathroom.innerHeight()-50,r=bathroom.innerWidth();stank>=7&&(currShit=walkH,currJumpShit=jumpH,currDownShit=downH,currSteadyShit=steadyH),stank<7&&(currShit=walkM,currJumpShit=jumpM,currDownShit=downM,currSteadyShit=steadyM),stank<=3&&(currShit=walkL,currJumpShit=jumpL,currDownShit=downL,currSteadyShit=steadyL),dir.left&&(t-=lSpeed,shit.css({"background-position":currShit})),dir.up&&itJumped&&!dir.down&&(e-=uSpeed,shit.css({"background-position":currJumpShit})),dir.up||itJumped||!dir.down||(e+=dSpeed,shit.css({"background-position":currDownShit})),a+e<70&&(e=70,e-=a),s+t<-100&&(t=-100,t-=s,dir.left=!1,gameOutcome="lost",finished()),a+e+o>n&&(e=0,e+=n-a-o,dir.down=!1),s+t+i>r&&(t=0,t+=r-s-i),shit.css({left:"+="+t,top:"+="+e}),$(".enemy").each(function(){recthit(shit,$(this))&&(ouchie(),($(this).hasClass("yellowSpray")||$(this).hasClass("water"))&&(stank--,score-=50),$(this).hasClass("plunger")&&(stank-=2,score-=75),$(this).hasClass("soap")&&(stank-=5,score-=100),$(this).hasClass("brush")&&(stank--,score-=500),$(this).hasClass("redSpray")&&(stank-=3,score-=200),score<0&&(score=0),$(this).remove(),updateStankBar())}),$(".fart").each(function(){recthit(shit,$(this))&&($(this).hasClass("brown")&&(playSoundLang(brownFart),++stank>10&&(stank=10),score+=50),$(this).hasClass("green")&&(playSoundLang(greenFart),stank=10,score+=100),$(this).remove(),updateStankBar())}),$(".piss").each(function(){recthit(shit,$(this))&&(playSoundLang(peepee),$(this).remove(),rSpeed*=5,score+=100,setTimeout(function(){rSpeed=speed},500))}),toilet.each(function(){circlehit(shit,$(this))&&(score+=5e3,$(this).remove(),shit.remove(),gameOutcome="won",finished())}),gameRunning&&(theLoop=window.requestAnimationFrame(gameOn))}function runIt(){gameRunning&&(bgMusic.play(),thisToilet(),timerInt=setInterval(runTimer,1e3),bgMoveInt=setInterval(bgMove,1e3/30),addScoreInt=setInterval(addScore,125),createEnemyInt=setTimeout(createEnemy,enemyThreshold),pissInt=setTimeout(createPiss,randNum(15e3,2e4)),createLifeInt=setTimeout(createLife,randNum(1e4,2e4)),theLoop=window.requestAnimationFrame(gameOn))}function finished(){gameShareDirty={won:{fb:"I scored "+score+" playing the Lil Shit Game!",tw:"http://twitter.com/intent/tweet?status=I%20scored%20"+score+"%20playing%20the%20Lil%20Shit%20Game%20and%20won!%20http%3A%2F%2Fsamzabala.com%2Fbathroomrampage"},lost:{fb:"I scored "+score+" playing the Lil Shit Game and won!",tw:"http://twitter.com/intent/tweet?status=I%20scored%20"+score+"%20playing%20the%20Lil%20Shit%20Game%20http%3A%2F%2Fsamzabala.com%2Fbathroomrampage"}},gameShareClean={won:{fb:"I scored "+score+" playing the Lil Poop Game and won!",tw:"http://twitter.com/intent/tweet?status=I%20scored%20"+score+"%20playing%20the%20Lil%20Poop%20Game%20and%20won!%20http%3A%2F%2Fsamzabala.com%2Fbathroomrampage"},lost:{fb:"I scored "+score+" playing the Lil Poop Game!",tw:"http://twitter.com/intent/tweet?status=I%20scored%20"+score+"%20playing%20the%20Lil%20Poop%20Game%20http%3A%2F%2Fsamzabala.com%2Fbathroomrampage"}},"lost"==gameOutcome?(playSoundLang(ded),$("#bigshit").css({"background-position":"0px -600px"}),gameOutcomeMessages=gameLostArray,gameShare="#dirty"==window.location.hash?gameShareDirty.lost:gameShareClean.lost,$(".tweet").attr("href",gameShare.tw)):"won"==gameOutcome&&(playSoundLang(win),$("#bigshit").css({"background-position":"0px -900px"}),gameOutcomeMessages=gameWonArray,gameShare="#dirty"==window.location.hash?gameShareDirty.won:gameShareClean.won,$(".tweet").attr("href",gameShare.tw)),theLoop=null,gameRunning=!1,shitIsRun=!1,enemyThreshold=3e3,clearInterval(addScoreInt),clearInterval(bgMoveInt),clearInterval(timerInt),clearTimeout(createEnemyInt),clearTimeout(createLifeInt),clearTimeout(pissInt),bgMusic.pause(),bgMusic.currentTime=0,playSoundLang.currentTime=0,messageIndex=randNum(0,gameOutcomeMessages.length-1),message=gameOutcomeMessages[messageIndex],$(".fart").remove(),$(".enemy").remove(),$(".piss").remove(),$("#instructions").css({display:"none"}),$("#finished").css({display:"block"}),$("#finished h1").html(message),$("h2 span").text(score),$("#startOverlay").fadeIn(1e3),$(".textbox").fadeIn(500)}var theLoop,createEnemyInt,createLifeInt,addScoreInt,bgMoveInt,timerInt,pissInt,currShit,currJumpShit,currDownShit,currSteadyShit,gameOutcome,messageIndex,gameOutcomeMessages,gameWonArray,gameLostArray,shit=$("#shit"),toilet=$("#toilet"),bathroom=$("#bathroom"),gameRunning=!1,score=0,timer=200,stank=10,dir={up:!1,down:!1,left:!1},speed=4,rSpeed=speed,lSpeed=speed-1,uSpeed=8*speed,dSpeed=2*speed,bgX=0,bgXSpeed=speed+10,oNext=!1,shitIsRun=!1,babySteps=0,itJumped=!1,enemyThreshold=3e3,steadyH="0px -200px",steadyM="-200px -200px",steadyL="-400px -200px",walkH="0px 0px",walkM="-200px 0px",walkL=" -400px 0px",jumpH="0px -400px",jumpM="-200px -400px",jumpL="-400px -400px",downH="0px -200px",downM="-200px -200px",downL="-400px -200px",gameShare={},gameShareDirty={},gameWonArrayDirty=["That was impressive motherfucker","U made the Lil Shit happy, look at that face...","Congratulations! you won fucking nothing!","Holy Shet","AAAYYYYYYYYYYY","Congrats, u let the Lil Shit pollute the ocean","The Lil Shit's happily melting into the sewers now","Fuck, you won.","The Lil Shit's still dead inside. U never saved them. This was a lie. Ted Cruz is the Zodiac Killer.","You actually won the fuq"],gameLostArrayDirty=["You killed the Lil Shit you sadistic fuck","Do u know the fuck you've done?? look at the shit's face","Wow u weak asshole","Hahahahahahahaaaa what the fuck was that","That was a pretty shitty work u did literally","Shit's ded","You're weaker than the asshole that gave birth to this shit","Good job u fucking killed the Lil Shit","U fucked up u punk bitch","You hurt the Lil Shit's feelings u insensitive fuck"],gameShareClean={},gameWonArrayClean=["That was actually impressive","U made the Lil Poop happy, look at that face...","Congratulations! you won nothing!","Holy Poo","AAAYYYYYYYYYYY","Congrats, u let the Lil Poop pollute the ocean","The Lil Poop's happily melting into the sewers now","Frickity Frack, you won.","The Lil Poop's still dead inside. U never saved them. This was a lie. Ted Cruz is the Zodiac Killer.","You actually won the eff"],gameLostArrayClean=["You killed the Lil Poop you big meanie","Do u know the hickie you've done?? look at the poop's face","Wow u weak butt","Hahahahahahahaaaa what the bleep was that","That was a pretty poopy work u did literally","Poop's ded","You're weaker than the butt hole that gave birth to this poop","Good job u killed the Lil Poop","U screwed up u punk muffin","You hurt the Lil Poop's feelings u insensitive doot doot"],bgMusic=new Audio("sounds/bgmusic.mp3"),brownFart=new Audio("sounds/brownfart.mp3"),ded=new Audio("sounds/ded.mp3"),greenFart=new Audio("sounds/greenfart.mp3"),jump=new Audio("sounds/jump.mp3"),ow=new Audio("sounds/ow.mp3"),win=new Audio("sounds/win.mp3"),start=new Audio("sounds/start.mp3"),walk=new Audio("sounds/walk.mp3"),spraySquirt=new Audio("sounds/squirt.mp3"),peepee=new Audio("sounds/peepee.mp3"),ping=new Audio("sounds/homebutton.mp3");bgMusic.loop=!0,checkNasty(),$("#switchNasty").click(function(e){e.preventDefault,window.location.hash=this.hash}),$(window).on("hashchange",function(e){e.preventDefault,checkNasty()}),$(document).ready(function(){setTimeout(function(){$("#bathroom #startOverlay .textbox").animate({opacity:1},200)},500)}),$(document).keydown(function(e){gameRunning&&(32!=e.which&&13!=e.which||(itJumped=!0,dir.up=!0,dir.down=!1,setTimeout(function(){itJumped=!1,dir.up=!1,dir.down=!0},180),playSoundLang(jump),walk.muted=!0,setTimeout(function(){walk.muted=!1},800)))}),$(document).keyup(function(e){gameRunning&&(0==oNext&&80==e.which||0==oNext&&65==e.which?(playSoundLang(walk),shitIsRun?shit.stop(!0).animate({left:"+="+rSpeed},100,function(){shit.stop()}):(shit.css({"background-position":currShit}),setTimeout(function(){shit.css({"background-position":steadyH})},300),shit.stop(!0).animate({left:"+=100"},200,function(){shit.stop()}),babySteps++),oNext=!0):1==oNext&&79==e.which||1==oNext&&83==e.which?(playSoundLang(walk),shitIsRun?shit.stop(!0).animate({left:"+="+rSpeed},100,function(){shit.stop()}):(shit.css({"background-position":currShit}),setTimeout(function(){shit.css({"background-position":steadyH})},300),shit.stop(!0).animate({left:"+=100"},200,function(){shit.stop()}),babySteps++),oNext=!1):(1==oNext&&80==e.which||0==oNext&&79==e.which||1==oNext&&65==e.which||0==oNext&&83==e.which)&&shitIsRun&&(dir.left=!0),32!=e.which&&13!=e.which||(itJumped=!1,walk.muted=!1,dir.up=!1,dir.down=!0),babySteps>3&&(babySteps=3),shitIsRun||3!=babySteps||(shitIsRun=!0),shitIsRun&&(dir.left=!0))}),$("#start").click(function(){gameRunning=!0,start.play(),$(".textbox").fadeOut(500),$("#startOverlay").fadeOut(1e3),$("#instruction").css({display:"none"}),runIt()}),$("#start").mousedown(function(){$(this).css({top:".125em","-moz-box-shadow":"0px .125em #552578","-webkit-box-shadow":"0px .125em #552578","box-shadow":"0px .125em #552578"})}),$("#start").mouseup(function(){$(this).css({top:"0","-moz-box-shadow":"0px .25em #552578","-webkit-box-shadow":"0px .25em #552578","box-shadow":"0px .25em #552578"})}),$(".restart").click(function(){ping.play(),$(this).css({top:".125em","-moz-box-shadow":"0px .125em #552578","-webkit-box-shadow":"0px .125em #552578","box-shadow":"0px .125em #552578"}),location.reload()}),window.fbAsyncInit=function(){FB.init({appId:"1591193187876202",autoLogAppEvents:!0,xfbml:!0,version:"v2.11"})},function(e,t,a){var s,o=e.getElementsByTagName(t)[0];e.getElementById(a)||((s=e.createElement(t)).id=a,s.src="https://connect.facebook.net/en_US/sdk.js",o.parentNode.insertBefore(s,o))}(document,"script","facebook-jssdk"),$(".share.fb").on("click",function(e){e.preventDefault,gameRunning||FB.ui({method:"share",display:"popup",href:"http://samzabala.com/bathroomrampage",quote:gameShare.fb},function(e){})});